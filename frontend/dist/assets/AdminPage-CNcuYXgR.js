import{j as e,r as S,a as le,B as t,T as s,b as o}from"./index-pyrP4BMh.js";import{u as ae}from"./useTaskQueries-Dyn3x2M3.js";import{U as b,T as M,a as re}from"./types-CKC1yxAr.js";import{A as D}from"./Alert-gy1BkeIG.js";import{R as ce,C as de,L as oe,a as d}from"./Refresh-uSvqQb4a.js";import{c as I,P as x,C as h,a as j,I as U}from"./List-CAw70JoQ.js";import{G as i}from"./Grid-C5_dhhtu.js";import{P as R}from"./Person-9bL1m4WW.js";import{S as N,E as xe}from"./Schedule-DCJfQHC7.js";import{S as p}from"./Stack-DGPHLbVX.js";import{A as he}from"./Add-C1BCB_oL.js";import{T as je,a as me,b as ue,c as B,d as c,e as pe,S as fe}from"./Settings-B2Jo51qR.js";import{D as ge,M as W,F as E,S as P}from"./Delete-Dp31KGW5.js";import{a as L,c as F,b as G,D as O}from"./DialogTitle-Zceb_dXp.js";import{T as C,F as ye,I as be,S as ve}from"./TextField-Dms40dRf.js";import{E as Se}from"./Email-FnY60o2V.js";const Ce=I(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),Te=I(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ke=I(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),qe=()=>{const[f,V]=S.useState(0),[H,T]=S.useState(!1),[q,k]=S.useState(!1),[r,g]=S.useState(null),[l,J]=S.useState({maxTasksPerUser:1e3,maxFileSize:10,emailNotifications:!0,voiceProcessing:!0,nlpProcessing:!0,maintenanceMode:!1}),{useGetMe:Q}=le(),{useGetTasks:K,useGetAnalytics:X,useGetReminderStats:Y}=ae(),{data:A}=Q(),{data:z}=K(),{data:we}=X(),{data:Ee}=Y(),y=(z==null?void 0:z.data)||[];if(!((A==null?void 0:A.role)===b.ADMIN))return e.jsx(t,{sx:{p:3},children:e.jsx(D,{severity:"error",children:"Access denied. Admin privileges required."})});const m=S.useMemo(()=>{const a=y.length,w=y.filter(u=>u.status===M.COMPLETED).length,te=y.filter(u=>u.status===M.PENDING).length,ne=y.filter(u=>u.deadline&&new Date(u.deadline)<new Date&&u.status===M.PENDING).length,ie=y.filter(u=>u.priority===re.URGENT).length;return{totalUsers:1,totalTasks:a,completedTasks:w,pendingTasks:te,overdueTasks:ne,urgentTasks:ie,completionRate:a>0?w/a*100:0}},[y]),Z=[{id:"1",username:"admin",email:"admin@example.com",fullname:"System Administrator",role:b.ADMIN,createdAt:"2024-01-01",lastLogin:"2024-01-15",taskCount:y.length,status:"active"},{id:"2",username:"user1",email:"user1@example.com",fullname:"John Doe",role:b.USER,createdAt:"2024-01-10",lastLogin:"2024-01-14",taskCount:15,status:"active"}],_=n=>{g(n),T(!0)},$=()=>{console.log("Saving user:",r),T(!1),g(null)},v=(n,a)=>{J(w=>({...w,[n]:a}))},ee=()=>{console.log("Saving system settings:",l),k(!1)},se=[{label:"Overview",icon:e.jsx(Ce,{})},{label:"Users",icon:e.jsx(R,{})},{label:"Tasks",icon:e.jsx(N,{})},{label:"System",icon:e.jsx(fe,{})},{label:"Email",icon:e.jsx(Se,{})},{label:"Security",icon:e.jsx(ke,{})}];return e.jsxs(t,{sx:{p:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",children:"Admin Panel"}),e.jsx(o,{variant:"outlined",startIcon:e.jsx(ce,{}),onClick:()=>window.location.reload(),children:"Refresh"})]}),e.jsx(x,{sx:{mb:3},children:e.jsx(t,{display:"flex",gap:1,p:1,children:se.map((n,a)=>e.jsx(o,{variant:f===a?"contained":"text",startIcon:n.icon,onClick:()=>V(a),sx:{minWidth:120},children:n.label},a))})}),f===0&&e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(h,{children:e.jsx(j,{children:e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(R,{color:"primary",sx:{mr:2,fontSize:40}}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:m.totalUsers}),e.jsx(s,{color:"text.secondary",children:"Total Users"})]})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(h,{children:e.jsx(j,{children:e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(N,{color:"primary",sx:{mr:2,fontSize:40}}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:m.totalTasks}),e.jsx(s,{color:"text.secondary",children:"Total Tasks"})]})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(h,{children:e.jsx(j,{children:e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(de,{color:"success",sx:{mr:2,fontSize:40}}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:m.completedTasks}),e.jsx(s,{color:"text.secondary",children:"Completed"})]})]})})})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsx(h,{children:e.jsx(j,{children:e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(xe,{color:"error",sx:{mr:2,fontSize:40}}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",children:m.overdueTasks}),e.jsx(s,{color:"text.secondary",children:"Overdue"})]})]})})})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(j,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Task Completion Rate"}),e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(oe,{variant:"determinate",value:m.completionRate,sx:{flex:1,height:8,borderRadius:4}}),e.jsxs(s,{variant:"h6",children:[m.completionRate.toFixed(1),"%"]})]})]})})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(j,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"System Status"}),e.jsxs(p,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Database"}),e.jsx(d,{label:"Online",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Email Service"}),e.jsx(d,{label:"Online",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Voice Processing"}),e.jsx(d,{label:"Online",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"NLP Service"}),e.jsx(d,{label:"Online",color:"success",size:"small"})]})]})]})})})]}),f===1&&e.jsx(h,{children:e.jsxs(j,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",children:"User Management"}),e.jsx(o,{variant:"contained",startIcon:e.jsx(he,{}),onClick:()=>{g(null),T(!0)},children:"Add User"})]}),e.jsx(je,{children:e.jsxs(me,{children:[e.jsx(ue,{children:e.jsxs(B,{children:[e.jsx(c,{children:"Username"}),e.jsx(c,{children:"Email"}),e.jsx(c,{children:"Full Name"}),e.jsx(c,{children:"Role"}),e.jsx(c,{children:"Tasks"}),e.jsx(c,{children:"Last Login"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(pe,{children:Z.map(n=>e.jsxs(B,{children:[e.jsx(c,{children:n.username}),e.jsx(c,{children:n.email}),e.jsx(c,{children:n.fullname}),e.jsx(c,{children:e.jsx(d,{label:n.role,color:n.role===b.ADMIN?"error":"primary",size:"small"})}),e.jsx(c,{children:n.taskCount}),e.jsx(c,{children:n.lastLogin}),e.jsx(c,{children:e.jsx(d,{label:n.status,color:n.status==="active"?"success":"default",size:"small"})}),e.jsxs(c,{children:[e.jsx(U,{size:"small",onClick:()=>_(n),children:e.jsx(Te,{})}),e.jsx(U,{size:"small",color:"error",onClick:()=>{window.confirm("Are you sure you want to delete this user?")&&console.log("Delete user:",n.id)},children:e.jsx(ge,{})})]})]},n.id))})]})})]})}),f===2&&e.jsx(h,{children:e.jsxs(j,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Task Management"}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(x,{sx:{p:2,textAlign:"center"},children:[e.jsx(s,{variant:"h4",color:"primary",children:m.totalTasks}),e.jsx(s,{variant:"body2",children:"Total Tasks"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(x,{sx:{p:2,textAlign:"center"},children:[e.jsx(s,{variant:"h4",color:"success.main",children:m.completedTasks}),e.jsx(s,{variant:"body2",children:"Completed"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(x,{sx:{p:2,textAlign:"center"},children:[e.jsx(s,{variant:"h4",color:"warning.main",children:m.pendingTasks}),e.jsx(s,{variant:"body2",children:"Pending"})]})}),e.jsx(i,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(x,{sx:{p:2,textAlign:"center"},children:[e.jsx(s,{variant:"h4",color:"error.main",children:m.overdueTasks}),e.jsx(s,{variant:"body2",children:"Overdue"})]})})]})]})}),f===3&&e.jsx(h,{children:e.jsxs(j,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",children:"System Settings"}),e.jsx(o,{variant:"contained",onClick:()=>k(!0),children:"Edit Settings"})]}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Current Settings"}),e.jsxs(p,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Max Tasks Per User:"}),e.jsx(s,{children:l.maxTasksPerUser})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Max File Size (MB):"}),e.jsx(s,{children:l.maxFileSize})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Email Notifications:"}),e.jsx(d,{label:l.emailNotifications?"Enabled":"Disabled",color:l.emailNotifications?"success":"default",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Voice Processing:"}),e.jsx(d,{label:l.voiceProcessing?"Enabled":"Disabled",color:l.voiceProcessing?"success":"default",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"NLP Processing:"}),e.jsx(d,{label:l.nlpProcessing?"Enabled":"Disabled",color:l.nlpProcessing?"success":"default",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Maintenance Mode:"}),e.jsx(d,{label:l.maintenanceMode?"Enabled":"Disabled",color:l.maintenanceMode?"error":"success",size:"small"})]})]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"System Information"}),e.jsxs(p,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Server Status:"}),e.jsx(d,{label:"Online",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Database Status:"}),e.jsx(d,{label:"Connected",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Uptime:"}),e.jsx(s,{children:"99.9%"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Version:"}),e.jsx(s,{children:"1.0.0"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Last Backup:"}),e.jsx(s,{children:"2024-01-15"})]})]})]})})]})]})}),f===4&&e.jsx(h,{children:e.jsxs(j,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Email Configuration"}),e.jsx(D,{severity:"info",sx:{mb:2},children:"Email service is currently configured for Gmail. Users can configure their own email settings in their profile."}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Email Statistics"}),e.jsxs(p,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Emails Sent Today:"}),e.jsx(s,{children:"0"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Emails Sent This Week:"}),e.jsx(s,{children:"0"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Failed Deliveries:"}),e.jsx(s,{children:"0"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Service Status:"}),e.jsx(d,{label:"Active",color:"success",size:"small"})]})]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Email Templates"}),e.jsxs(p,{spacing:1,children:[e.jsx(o,{variant:"outlined",fullWidth:!0,children:"Welcome Email Template"}),e.jsx(o,{variant:"outlined",fullWidth:!0,children:"Reminder Email Template"}),e.jsx(o,{variant:"outlined",fullWidth:!0,children:"Overdue Email Template"}),e.jsx(o,{variant:"outlined",fullWidth:!0,children:"Password Reset Template"})]})]})})]})]})}),f===5&&e.jsx(h,{children:e.jsxs(j,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Security Settings"}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Authentication"}),e.jsxs(p,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"JWT Token Expiry:"}),e.jsx(s,{children:"15 minutes"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Refresh Token Expiry:"}),e.jsx(s,{children:"7 days"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Password Requirements:"}),e.jsx(s,{children:"8+ characters"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Session Timeout:"}),e.jsx(s,{children:"24 hours"})]})]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(x,{sx:{p:2},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Security Logs"}),e.jsxs(p,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Failed Login Attempts:"}),e.jsx(s,{children:"0"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Suspicious Activity:"}),e.jsx(s,{children:"0"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Last Security Scan:"}),e.jsx(s,{children:"2024-01-15"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",children:[e.jsx(s,{children:"Security Status:"}),e.jsx(d,{label:"Secure",color:"success",size:"small"})]})]})]})})]})]})}),e.jsxs(L,{open:H,onClose:()=>T(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(F,{children:r?"Edit User":"Add New User"}),e.jsx(G,{children:e.jsxs(p,{spacing:2,sx:{mt:1},children:[e.jsx(C,{label:"Username",value:(r==null?void 0:r.username)||"",onChange:n=>g(a=>({...a,username:n.target.value})),fullWidth:!0}),e.jsx(C,{label:"Email",type:"email",value:(r==null?void 0:r.email)||"",onChange:n=>g(a=>({...a,email:n.target.value})),fullWidth:!0}),e.jsx(C,{label:"Full Name",value:(r==null?void 0:r.fullname)||"",onChange:n=>g(a=>({...a,fullname:n.target.value})),fullWidth:!0}),e.jsxs(ye,{fullWidth:!0,children:[e.jsx(be,{children:"Role"}),e.jsxs(ve,{value:(r==null?void 0:r.role)||b.USER,onChange:n=>g(a=>({...a,role:n.target.value})),label:"Role",children:[e.jsx(W,{value:b.USER,children:"User"}),e.jsx(W,{value:b.ADMIN,children:"Admin"})]})]}),!r&&e.jsx(C,{label:"Password",type:"password",fullWidth:!0})]})}),e.jsxs(O,{children:[e.jsx(o,{onClick:()=>T(!1),children:"Cancel"}),e.jsx(o,{variant:"contained",onClick:$,children:r?"Update":"Create"})]})]}),e.jsxs(L,{open:q,onClose:()=>k(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(F,{children:"System Settings"}),e.jsx(G,{children:e.jsxs(p,{spacing:2,sx:{mt:1},children:[e.jsx(C,{label:"Max Tasks Per User",type:"number",value:l.maxTasksPerUser,onChange:n=>v("maxTasksPerUser",parseInt(n.target.value)),fullWidth:!0}),e.jsx(C,{label:"Max File Size (MB)",type:"number",value:l.maxFileSize,onChange:n=>v("maxFileSize",parseInt(n.target.value)),fullWidth:!0}),e.jsx(E,{control:e.jsx(P,{checked:l.emailNotifications,onChange:n=>v("emailNotifications",n.target.checked)}),label:"Email Notifications"}),e.jsx(E,{control:e.jsx(P,{checked:l.voiceProcessing,onChange:n=>v("voiceProcessing",n.target.checked)}),label:"Voice Processing"}),e.jsx(E,{control:e.jsx(P,{checked:l.nlpProcessing,onChange:n=>v("nlpProcessing",n.target.checked)}),label:"NLP Processing"}),e.jsx(E,{control:e.jsx(P,{checked:l.maintenanceMode,onChange:n=>v("maintenanceMode",n.target.checked)}),label:"Maintenance Mode"})]})}),e.jsxs(O,{children:[e.jsx(o,{onClick:()=>k(!1),children:"Cancel"}),e.jsx(o,{variant:"contained",onClick:ee,children:"Save Settings"})]})]})]})};export{qe as default};
//# sourceMappingURL=AdminPage-CNcuYXgR.js.map
